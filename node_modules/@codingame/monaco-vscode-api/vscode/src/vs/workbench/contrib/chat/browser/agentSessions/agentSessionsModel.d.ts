import { Event } from "../../../../../base/common/event.js";
import { IMarkdownString } from "../../../../../base/common/htmlContent.js";
import { Disposable } from "../../../../../base/common/lifecycle.js";
import { ThemeIcon } from "../../../../../base/common/themables.js";
import { URI } from "../../../../../base/common/uri.js";
import { IInstantiationService } from "../../../../../platform/instantiation/common/instantiation.js";
import { ILogService } from "../../../../../platform/log/common/log.service.js";
import { IStorageService } from "../../../../../platform/storage/common/storage.service.js";
import { ILifecycleService } from "../../../../services/lifecycle/common/lifecycle.service.js";
import { ChatSessionStatus, IChatSessionFileChange } from "../../common/chatSessionsService.js";
import { IChatSessionsService } from "../../common/chatSessionsService.service.js";
export interface IAgentSessionsModel {
    readonly onWillResolve: Event<void>;
    readonly onDidResolve: Event<void>;
    readonly onDidChangeSessions: Event<void>;
    readonly sessions: IAgentSession[];
    getSession(resource: URI): IAgentSession | undefined;
    resolve(provider: string | string[] | undefined): Promise<void>;
}
interface IAgentSessionData {
    readonly providerType: string;
    readonly providerLabel: string;
    readonly resource: URI;
    readonly status: ChatSessionStatus;
    readonly tooltip?: string | IMarkdownString;
    readonly label: string;
    readonly description?: string | IMarkdownString;
    readonly icon: ThemeIcon;
    readonly timing: {
        readonly startTime: number;
        readonly endTime?: number;
        readonly inProgressTime?: number;
        readonly finishedOrFailedTime?: number;
    };
    readonly changes?: readonly IChatSessionFileChange[] | {
        readonly files: number;
        readonly insertions: number;
        readonly deletions: number;
    };
}
/**
 * Checks if the provided changes object represents valid diff information.
 */
export declare function hasValidDiff(changes: IAgentSession["changes"]): boolean;
/**
 * Gets a summary of agent session changes, converting from array format to object format if needed.
 */
export declare function getAgentChangesSummary(changes: IAgentSession["changes"]): {
    readonly files: number;
    readonly insertions: number;
    readonly deletions: number;
} | undefined;
export interface IAgentSession extends IAgentSessionData {
    isArchived(): boolean;
    setArchived(archived: boolean): void;
    isRead(): boolean;
    setRead(read: boolean): void;
}
export declare function isLocalAgentSessionItem(session: IAgentSession): boolean;
export declare function isAgentSession(obj: IAgentSessionsModel | IAgentSession): obj is IAgentSession;
export declare function isAgentSessionsModel(obj: IAgentSessionsModel | IAgentSession): obj is IAgentSessionsModel;
export declare class AgentSessionsModel extends Disposable implements IAgentSessionsModel {
    private readonly chatSessionsService;
    private readonly lifecycleService;
    private readonly instantiationService;
    private readonly storageService;
    private readonly logService;
    private readonly _onWillResolve;
    readonly onWillResolve: Event<void>;
    private readonly _onDidResolve;
    readonly onDidResolve: Event<void>;
    private readonly _onDidChangeSessions;
    readonly onDidChangeSessions: Event<void>;
    private _sessions;
    get sessions(): IAgentSession[];
    private readonly resolver;
    private readonly providersToResolve;
    private readonly mapSessionToState;
    private readonly cache;
    constructor(chatSessionsService: IChatSessionsService, lifecycleService: ILifecycleService, instantiationService: IInstantiationService, storageService: IStorageService, logService: ILogService);
    private registerListeners;
    getSession(resource: URI): IAgentSession | undefined;
    resolve(provider: string | string[] | undefined): Promise<void>;
    private doResolve;
    private toAgentSession;
    private static readonly READ_STATE_INITIAL_DATE;
    private readonly sessionStates;
    private isArchived;
    private setArchived;
    private isRead;
    private setRead;
}
export {};
